---
layout: hexo
title: æ•™ç¨‹ï¼šè§£å†³å†²çªä¸å¡ä½é—®é¢˜
date: 2025-08-27 19:49:31
tags:
---

# Hexo éƒ¨ç½² GitHub æ•™ç¨‹ï¼šè§£å†³å†²çªä¸å¡ä½é—®é¢˜

åœ¨ä½¿ç”¨ Hexo éƒ¨ç½²åšå®¢åˆ° GitHub ä»“åº“çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š

1. `hexo d` å¡ä½ï¼Œæ¨é€å¤±è´¥
2. è¿œç¨‹åˆ†æ”¯æ¯”æœ¬åœ°æ›´æ–°ï¼Œå¯¼è‡´ push è¢«æ‹’ç»
3. æ–‡ä»¶å†²çªï¼ˆä¾‹å¦‚åŒä¸€ç¯‡æ–‡ç« åœ¨æœ¬åœ°å’Œè¿œç¨‹éƒ½ä¿®æ”¹è¿‡ï¼‰

æœ¬æ–‡å°†è¯¦ç»†è®²è§£è¿™äº›é—®é¢˜çš„åŸå› åŠè§£å†³æ–¹æ¡ˆã€‚

---

## 1. Hexo éƒ¨ç½²æµç¨‹å›é¡¾

Hexo éƒ¨ç½² GitHub çš„æ ¸å¿ƒæ­¥éª¤ï¼š

```bash
hexo clean       # æ¸…ç†ç”Ÿæˆçš„ç¼“å­˜æ–‡ä»¶
hexo g           # ç”Ÿæˆé™æ€æ–‡ä»¶åˆ° public æ–‡ä»¶å¤¹
hexo d           # éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“
```

éƒ¨ç½²æ—¶ï¼ŒHexo ä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆ `.deploy_git` ç›®å½•ï¼Œä¸´æ—¶å­˜æ”¾ Git ä»“åº“å†…å®¹ï¼Œç„¶å push åˆ°è¿œç¨‹ã€‚

---

## 2. éƒ¨ç½²å¡ä½ / push ä¸­æ–­

### ç°è±¡

```
Writing objects:  34% (1089/3197), 3.09 MiB | 167.00 KiB/s
```

* æ‰“åŒ…æˆåŠŸï¼Œä½†æ¨é€åˆ° GitHub æ—¶å¡ä½ä¸åŠ¨ã€‚
* å¸¸è§åŸå› ï¼š

  1. SSH ç›´è¿ GitHub ç½‘ç»œä¸ç¨³å®š
  2. ä¸€æ¬¡æ€§æäº¤æ–‡ä»¶å¤ªå¤š
  3. ä»£ç†/ç«¯å£æœªé…ç½®å¥½

### è§£å†³æ–¹æ³•

#### æ–¹æ³• 1ï¼šç¡®ä¿ SSH ä½¿ç”¨ 443 ç«¯å£

åœ¨ `~/.ssh/config` ä¸­æ·»åŠ ï¼š

```ssh
Host github.com
  HostName ssh.github.com
  Port 443
  User git
```

Hexo `_config.yml` ä¸­ä¿æŒï¼š

```yaml
deploy:
  type: git
  repo: git@github.com:ç”¨æˆ·å/ä»“åº“å.git
  branch: main
```

#### æ–¹æ³• 2ï¼šåˆ é™¤ `.deploy_git` é‡æ–°éƒ¨ç½²

```bash
rm -rf .deploy_git
hexo clean && hexo g && hexo d
```

#### æ–¹æ³• 3ï¼šæ”¹ç”¨ HTTPS éƒ¨ç½²ï¼ˆæ›´ç¨³å®šï¼‰

```yaml
deploy:
  type: git
  repo: https://github.com/ç”¨æˆ·å/ä»“åº“å.git
  branch: main
```

é…ç½® GitHub Tokenï¼ŒHTTPS æ¨é€æ›´ç¨³å®šã€‚

---

## 3. è¿œç¨‹åˆ†æ”¯æ¯”æœ¬åœ°æ›´æ–°ï¼ˆnon-fast-forwardï¼‰

### ç°è±¡

```
! [rejected] befe -> befe (fetch first)
Updates were rejected because the remote contains work that you do not have locally.
```

### è§£å†³æ–¹æ³•

#### æ–¹æ³• 1ï¼šåˆå¹¶è¿œç¨‹æ›´æ–°ï¼ˆæ¨èï¼‰

```bash
git fetch origin
git merge origin/befe
# è§£å†³å†²çªå
git push origin befe
```

#### æ–¹æ³• 2ï¼šç›´æ¥è¦†ç›–è¿œç¨‹ï¼ˆå±é™©ï¼Œä½†é€‚åˆ Hexo éƒ¨ç½²åˆ†æ”¯ï¼‰

```bash
git push origin befe --force
```

---

## 4. æ–‡ä»¶å†²çªï¼ˆadd/addï¼‰

### ç°è±¡

```
CONFLICT (add/add): Merge conflict in source/_posts/xxx.md
Automatic merge failed; fix conflicts and then commit the result.
```

### è§£å†³æ­¥éª¤

1. æŸ¥çœ‹å†²çªæ–‡ä»¶

```bash
git status
```

2. å†³å®šä¿ç•™ç‰ˆæœ¬ï¼š

* ä¿ç•™æœ¬åœ°ç‰ˆæœ¬ï¼š

```bash
git checkout --ours path/to/file
```

* ä¿ç•™è¿œç¨‹ç‰ˆæœ¬ï¼š

```bash
git checkout --theirs path/to/file
```

* æ‰‹åŠ¨åˆå¹¶ä¸¤è€…å†…å®¹ï¼Œåˆ é™¤ `<<<<<<<` ç­‰æ ‡è®°

3. æ ‡è®°å·²è§£å†³ï¼š

```bash
git add path/to/file
```

4. æäº¤ï¼š

```bash
git commit -m "è§£å†³å†²çª"
```

5. æ¨é€ï¼š

```bash
git push origin befe
```

ğŸ’¡ å¦‚æœè¿™æ˜¯ Hexo éƒ¨ç½²åˆ†æ”¯ï¼Œé€šå¸¸ç›´æ¥ä¿ç•™æœ¬åœ°ç‰ˆæœ¬å¹¶å¼ºåˆ¶ push æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼š

```bash
git add .
git commit -m "è¦†ç›–è¿œç¨‹å†…å®¹ï¼Œè§£å†³å†²çª"
git push origin befe --force
```

---

## 5. æ€»ç»“å»ºè®®

1. Hexo éƒ¨ç½²åˆ†æ”¯å»ºè®®ä¸“ç”¨ï¼Œå¦‚ `gh-pages`ï¼Œé¿å…å’Œä¸»åˆ†æ”¯å†²çª
2. å¤šè´¦æˆ· SSH ç”¨ Host åˆ«åç®¡ç†ï¼ŒUser ä¸€å¾‹ç”¨ `git`
3. ç½‘ç»œä¸ç¨³å¯ç”¨ HTTPS + Token æˆ– SSH 443 ç«¯å£
4. é‡åˆ°å†²çªï¼Œæ‰‹åŠ¨è§£å†³æˆ–ç›´æ¥å¼ºåˆ¶è¦†ç›–è¿œç¨‹

---

è¿™æ ·ä¸€å¥—æ“ä½œæµç¨‹ï¼Œå¯ä»¥ä¿è¯ Hexo éƒ¨ç½²ç¨³å®šï¼Œä¸ä¼šå†å¡ä½ï¼Œä¹Ÿèƒ½é¡ºåˆ©æ›´æ–°è¿œç¨‹ä»“åº“ã€‚
